---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

function formatDate(date: Date) {
  return date.toLocaleDateString('en-GB', { year: 'numeric', month: 'long', day: 'numeric' });
}
---

<Layout
  title="Blog — JD Fortress AI"
  description="Insights on secure AI, on-premises deployment, data sovereignty, and the future of private AI infrastructure for UK businesses."
>

  <!-- HERO -->
  <section style="background:#0F2041; padding:80px 24px 64px;">
    <div style="max-width:760px; margin:0 auto;">
      <p style="color:#1E6FF5; font-size:0.85rem; font-weight:600; letter-spacing:0.12em; text-transform:uppercase; margin:0 0 16px;">The JD Fortress Blog</p>
      <h1 style="color:#fff; font-size:clamp(2rem, 5vw, 3rem); font-weight:700; line-height:1.15; letter-spacing:-0.03em; margin:0 0 16px;">
        Thinking Out Loud on Secure AI
      </h1>
      <p style="color:rgba(255,255,255,0.65); font-size:1.05rem; line-height:1.7; margin:0; max-width:560px;">
        No hype. No vendor fluff. Practical perspectives on private AI infrastructure, compliance, and what actually works in the field.
      </p>
    </div>
  </section>

  <!-- POST LISTING -->
  <section style="background:#fff; padding:64px 24px 96px;">
    <div style="max-width:760px; margin:0 auto;">

      {posts.length === 0 ? (
        <p style="color:#56585E; text-align:center; padding:48px 0;">No posts yet — check back soon.</p>
      ) : (
        <div style="display:flex; flex-direction:column; gap:0;">
          {posts.map((post, i) => (
            <article style={`padding:40px 0; ${i < posts.length - 1 ? 'border-bottom:1px solid #e8edf5;' : ''}`}>
              <div style="display:flex; align-items:center; gap:12px; margin-bottom:14px; flex-wrap:wrap;">
                <time style="color:#56585E; font-size:0.85rem;" datetime={post.data.date.toISOString()}>
                  {formatDate(post.data.date)}
                </time>
                <span style="color:#d1d5db; font-size:0.8rem;">·</span>
                <span style="color:#56585E; font-size:0.85rem;">{post.data.author}</span>
              </div>
              <h2 style="margin:0 0 12px;">
                <a
                  href={`/blog/${post.slug}`}
                  style="color:#0D141A; text-decoration:none; font-size:1.35rem; font-weight:700; line-height:1.3; letter-spacing:-0.02em;"
                  onmouseover="this.style.color='#1E6FF5'"
                  onmouseout="this.style.color='#0D141A'"
                >
                  {post.data.title}
                </a>
              </h2>
              <p style="color:#56585E; font-size:0.97rem; line-height:1.75; margin:0 0 20px;">
                {post.data.excerpt}
              </p>
              <a
                href={`/blog/${post.slug}`}
                style="color:#1E6FF5; text-decoration:none; font-size:0.9rem; font-weight:600;"
                onmouseover="this.style.textDecoration='underline'"
                onmouseout="this.style.textDecoration='none'"
              >
                Read more →
              </a>
            </article>
          ))}
        </div>
      )}

    </div>
  </section>

  <!-- CTA -->
  <section style="background:#F0F4FF; padding:64px 24px; text-align:center;">
    <div style="max-width:560px; margin:0 auto;">
      <h2 style="color:#0D141A; font-size:1.4rem; font-weight:700; margin:0 0 12px;">Want to talk through any of this?</h2>
      <p style="color:#56585E; font-size:0.95rem; line-height:1.7; margin:0 0 28px;">
        We write about what we see in the field. If something resonated, we're happy to have a practical, no-sales conversation.
      </p>
      <a href="/contact" style="background:#1E6FF5; color:#fff; padding:12px 28px; border-radius:8px; text-decoration:none; font-weight:600; font-size:0.95rem;" onmouseover="this.style.background='#1558cc'" onmouseout="this.style.background='#1E6FF5'">
        Get in Touch →
      </a>
    </div>
  </section>

</Layout>
